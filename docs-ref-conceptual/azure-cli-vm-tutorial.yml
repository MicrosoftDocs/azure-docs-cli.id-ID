### YamlMime:Tutorial
title: Membuat mesin virtual (VM) – Azure CLI | Microsoft Docs
metadata:
  title: Membuat mesin virtual (VM) – Azure CLI | Microsoft Docs
  description: Pelajari cara membuat mesin virtual (VM) dengan Azure CLI dengan menyelesaikan tutorial ini melalui Azure Cloud Shell atau dengan menginstal CLI secara lokal.
  audience: Developer
  level: Beginner
  displayType: two-column
  interactive: azurecli
  ms.date: 07/09/2018
  ms.author: dbradish
  author: dbradish-microsoft
  manager: barbkess
  ms.devlang: azure-cli
  ms.topic: tutorial
  ms.prod: azure
  ms.technology: azurecli
  ms.custom: devx-track-azurecli, seo-azure-cli
  clicktale: true
  keywords: azure cli create vm, virtual machine in azure cli
  ms.openlocfilehash: 3e141780e0aa3976c4ee14b86f22de9c3eb95f6a
  ms.sourcegitcommit: 766c21c494eb7fbdc5160c437868c187c0b6e587
  ms.translationtype: HT
  ms.contentlocale: id-ID
  ms.lasthandoff: 02/17/2022
  ms.locfileid: "138916652"
items:
- durationInMinutes: 1
  content: >-
    Dalam tutorial ini, Anda mempelajari semua langkah yang terlibat dalam membuat mesin virtual dengan Azure CLI. Tutorial ini juga mencakup kueri output, penggunaan kembali sumber daya Azure, dan penghapusan sumber daya.


    Tutorial ini dapat diselesaikan dengan pengalaman interaktif yang ditawarkan melalui Azure Cloud Shell, atau Anda dapat [menginstal CLI](install-azure-cli.md) secara lokal.


    Gunakan __ctrl-shift-v__ (__cmd-shift-v__ di macOS) untuk menempelkan teks tutorial ke Azure Cloud Shell.
- durationInMinutes: 1
  title: Masuk
  content: "Jika Anda menggunakan pemasangan lokal CLI, Anda harus masuk sebelum melakukan langkah lainnya.\n\n```azurecli-interactive\naz login\n```\n\nSelesaikan proses autentikasi dengan mengikuti langkah-langkah yang ditampilkan di terminal Anda. "
- durationInMinutes: 1
  title: Buat grup sumber daya
  content: >-
    Di Azure, semua sumber daya dialokasikan dalam grup manajemen sumber daya. Grup sumber daya menyediakan pengelompokan logis dari sumber daya yang membuatnya lebih mudah untuk digunakan sebagai kumpulan. Untuk tutorial ini, semua sumber daya yang dibuat masuk ke dalam satu grup bernama `TutorialResources`.


    ```azurecli

    az group create --name TutorialResources --location eastus

    ```
- durationInMinutes: 4
  title: Membuat komputer virtual
  content: "Mesin virtual di Azure memiliki banyak dependensi. CLI membuat sumber daya ini untuk Anda berdasarkan argumen baris perintah yang Anda tentukan.\n\nBuat mesin virtual baru yang menjalankan Ubuntu, yang menggunakan autentikasi SSH untuk login.\n\n```azurecli-interactive\naz vm create --resource-group TutorialResources \\\n  --name TutorialVM1 \\\n  --image UbuntuLTS \\\n  --generate-ssh-keys \\\n  --output json \\\n  --verbose \n```\n\n> [!NOTE]\n> Jika Anda memiliki kunci SSH bernama `id_rsa` yang sudah tersedia, kunci ini digunakan untuk autentikasi, bukan membuat kunci baru.\n\nSaat VM dibuat, Anda melihat nilai lokal yang digunakan dan sumber daya Azure dibuat karena opsi `--verbose`.\nSetelah VM siap, JSON dikembalikan dari layanan Azure termasuk alamat IP publik.\n\n```json\n{\n  \"fqdns\": \"\",\n  \"id\": \"...\",\n  \"location\": \"eastus\",\n  \"macAddress\": \"...\",\n  \"powerState\": \"VM running\",\n  \"privateIpAddress\": \"...\",\n  \"publicIpAddress\": <PUBLIC_IP_ADDRESS>,\n  \"resourceGroup\": \"TutorialResources\",\n  \"zones\": \"\"\n}\n```\n\nPastikan bahwa VM berjalan dengan menghubungkan melalui SSH.\n\n```bash\nssh <PUBLIC_IP_ADDRESS>\n```\n\nLanjutkan dan keluar dari VM.\n\nAda cara lain untuk mendapatkan alamat IP ini setelah VM dimulai. Di bagian selanjutnya Anda akan melihat cara mendapatkan informasi mendetail tentang VM, dan cara memfilternya."
- durationInMinutes: 3
  title: Mendapatkan informasi VM dengan kueri
  content: "Setelah VM dibuat, informasi mendetail tentang hal itu dapat diambil. Perintah umum untuk mendapatkan informasi dari sumber daya adalah `show`.\n\n```azurecli-interactive\naz vm show --name TutorialVM1 --resource-group TutorialResources\n```\n\nAnda akan melihat banyak informasi, yang mungkin sulit diurai secara visual. JSON yang ditampilkan berisi informasi tentang autentikasi, penyimpanan antarmuka jaringan, dan banyak lagi. Yang terpenting, ini berisi ID objek Azure untuk sumber daya tempat VM terhubung. ID objek memungkinkan akses ke sumber daya ini secara langsung untuk mendapatkan informasi selengkapnya tentang konfigurasi dan kemampuan VM. \n\nUntuk mengekstrak ID objek yang kita inginkan, argumen `--query` digunakan. Kueri ditulis dalam [bahasa kueri JMESPath](http://jmespath.org). Mulailah dengan mendapatkan ID objek pengontrol antarmuka jaringan (NIC).\n\n```azurecli-interactive\naz vm show --name TutorialVM1 \\\n  --resource-group TutorialResources \\\n  --query 'networkProfile.networkInterfaces[].id' \\\n  --output tsv\n```\n\nAda banyak hal yang terjadi di sini, hanya dengan menambahkan kueri. Setiap bagiannya merujuk ke kunci dalam JSON output, atau berupa operator JMESPath.\n\n* `networkProfile` adalah kunci JSON tingkat atas, yang memiliki `networkInterfaces` sub-kunci. Jika nilai JSON adalah kamus, kuncinya dirujuk dari kunci induk dengan operator `.`.\n* Nilai `networkInterfaces` berupa larik, sehingga diratakan dengan operator `[]`. Operator ini menjalankan sisa kueri di setiap elemen larik. Dalam hal ini, ia mendapatkan nilai `id` dari setiap elemen larik.\n\nFormat output `tsv` (nilai yang dipisahkan tab) dipastikan hanya menyertakan data hasil dan spasi kosong yang terdiri dari tab dan baris baru.\nKarena nilai yang ditampilkan adalah string kosong tunggal, ini dapat ditetapkan secara langsung ke variabel lingkungan.\n\nLanjutkan dan tetapkan ID objek NIC ke variabel lingkungan sekarang.\n\n```azurecli-interactive\nNIC_ID=$(az vm show -n TutorialVM1 -g TutorialResources \\\n  --query 'networkProfile.networkInterfaces[].id' \\\n  -o tsv)\n```\n\nContoh ini juga menunjukkan penggunaan argumen singkat. Anda dapat menggunakan `-g`, bukan `--resource-group`, `-n` bukan `--name`, dan `-o` bukan `--output`."
- durationInMinutes: 4
  title: Menetapkan variabel lingkungan dari output CLI
  content: >-
    Setelah Anda memiliki ID NIC, jalankan `az network nic show` untuk mendapatkan informasinya. Perhatikan bahwa Anda tidak memerlukan grup sumber daya di sini, karena nama grup sumber daya terdapat dalam ID sumber daya Azure.


    ```azurecli-interactive

    az network nic show --ids $NIC_ID

    ```



    Perintah ini menampilkan semua informasi untuk antarmuka jaringan VM. Data ini mencakup pengaturan DNS, informasi IP, pengaturan keamanan, dan alamat MAC. Saat ini, tujuannya adalah untuk mendapatkan alamat IP publik dan ID objek subnet.


    ```azurecli-interactive

    az network nic show --ids $NIC_ID \
      --query '{IP:ipConfigurations[].publicIpAddress.id, Subnet:ipConfigurations[].subnet.id}' \
      -o json
    ```


    ```json

    {
      "IP": [
        "/subscriptions/.../resourceGroups/TutorialResources/providers/Microsoft.Network/publicIPAddresses/TutorialVM1PublicIP"
      ],
      "Subnet": [
        "/subscriptions/.../resourceGroups/TutorialResources/providers/Microsoft.Network/virtualNetworks/TutorialVM1VNET/subnets/TutorialVM1Subnet"
      ]
    }

    ```


    Perintah ini menampilkan objek JSON yang memiliki kunci khusus ('IP' dan 'Subnet') untuk nilai yang diekstraksi. Meskipun gaya output ini mungkin tidak berguna untuk alat baris perintah, gaya ini membantu keterbacaan manusia dan dapat digunakan dengan skrip khusus.


    Untuk menggunakan alat baris perintah, ubah perintah untuk menghapus kunci dan output JSON khusus sebagai `tsv`. Gaya output ini dapat diproses oleh perintah shell `read` untuk memuat hasil ke dalam beberapa variabel. Karena dua nilai pada baris terpisah ditampilkan, pembatas perintah `read` harus diatur ke string kosong daripada default spasi putih non-baris baru.


    ```azurecli-interactive

    read -d '' IP_ID SUBNET_ID <<< $(az network nic show \
      --ids $NIC_ID \
      --query '[ipConfigurations[].publicIpAddress.id, ipConfigurations[].subnet.id]' \
      -o tsv)
    ```


    Anda tidak akan langsung menggunakan ID subnet, tetapi ID subnet harus disimpan sekarang agar tidak perlu melakukan pencarian kedua nanti. Untuk saat ini, gunakan ID objek IP publik untuk mencari alamat IP publik dan menyimpannya dalam variabel shell.


    ```azurecli-interactive

    VM1_IP_ADDR=$(az network public-ip show --ids $IP_ID \
      --query ipAddress \
      -o tsv)
    ```


    Sekarang Anda memiliki alamat IP VM yang disimpan dalam variabel shell. Lanjutkan dan periksa apakah itu adalah nilai yang sama yang Anda gunakan untuk terhubung ke VM pada awalnya.


    ```bash

    echo $VM1_IP_ADDR

    ```
- durationInMinutes: 2
  title: Membuat VM baru di subnet yang ada
  content: >-
    VM kedua menggunakan subnet yang ada. Anda dapat melewati beberapa langkah untuk segera mendapatkan alamat IP publik dari VM baru yang disimpan ke dalam variabel lingkungan, karena alamat tersebut dikembalikan dalam informasi pembuatan VM. Jika nanti Anda memerlukan informasi lain tentang VM, informasi tersebut selalu dapat diperoleh dari perintah `az vm show`.


    ```azurecli

    VM2_IP_ADDR=$(az vm create -g TutorialResources \
      -n TutorialVM2 \
      --image UbuntuLTS \
      --generate-ssh-keys \
      --subnet $SUBNET_ID \
      --query publicIpAddress \
      -o tsv)
    ```


    Menggunakan alamat IP yang disimpan, SSH ke VM yang baru dibuat.


    ```bash

    ssh $VM2_IP_ADDR

    ```


    Lanjutkan dan keluar dari VM.
- durationInMinutes: 2
  title: Penghapusan
  content: >-
    Setelah tutorial selesai, saatnya untuk menghapus sumber daya yang dibuat. Anda dapat menghapus sumber daya satu per satu dengan perintah `delete`, tetapi cara teraman untuk menghapus semua sumber daya dalam grup sumber daya adalah dengan `group delete`.


    ```azurecli-interactive

    az group delete --name TutorialResources --no-wait

    ```


    Perintah ini akan menghapus sumber daya yang dibuat selama tutorial, dan dijamin akan menghapus alokasinya dengan urutan yang benar. Parameter `--no-wait` mencegah CLI terblokir saat penghapusan berlangsung. Jika Anda ingin menunggu hingga penghapusan selesai atau melihat kemajuannya, gunakan perintah `group wait`.


    ```azurecli-interactive

    az group wait --name TutorialResources --deleted

    ```


    Jika pembersihan selesai, berarti tutorial ini selesai. Lanjutkan dengan ringkasan semua hal yang dipelajari dan link ke sumber daya yang akan membantu Anda melalui langkah berikutnya.
- durationInMinutes: 1
  title: Ringkasan
  content: >-
    Selamat! Anda mempelajari cara membuat VM dengan sumber daya baru atau yang sudah ada, menggunakan argumen `--query` dan `--output` untuk menangkap data yang akan disimpan dalam variabel shell, dan melihat beberapa sumber daya yang dibuat untuk VM Azure.


    Langkah selanjutnya bergantung pada tujuan penggunaan CLI. Ada berbagai materi yang membahas lebih dalam tentang fitur yang dijelaskan dalam tutorial ini.


    ### <a name="samples"></a>Sampel


    Jika Anda ingin segera memulai dengan tugas tertentu, lihat beberapa contoh skrip.


    * Menggunakan [VM Linux](/azure/virtual-machines/linux/cli-samples?toc=%2fcli%2fazure%2ftoc.json) dan [VM Windows](/azure/virtual-machines/windows/cli-samples?toc=%2fcli%2fazure%2ftoc.json)

    * Menggunakan [webapps](/azure/app-service/app-service-cli-samples?toc=%2Fcli%2Fazure%2Ftoc.json) dan [Azure Functions](/azure/azure-functions/functions-cli-samples?toc=%2fcli%2fazure%2ftoc.json)

    * Menggunakan database - [Azure SQL databases](/azure/sql-database/sql-database-cli-samples?toc=%2fcli%2fazure%2ftoc.json), [PostgreSQL](/azure/postgresql/sample-scripts-azure-cli?toc=%2fcli%2fazure%2ftoc.json), [MySQL](/azure/mysql/sample-scripts-azure-cli?toc=%2fcli%2fazure%2ftoc.json), dan [CosmosDB](/azure/cosmos-db/cli-samples?toc=%2fcli%2fazure%2ftoc.json).


    ### <a name="in-depth-cli-documentation"></a>Dokumentasi CLI mendalam


    Ada juga topik yang membahas lebih dalam tentang fitur CLI yang ditunjukkan dalam tutorial.


    * Pelajari selengkapnya tentang [format output](format-output-azure-cli.md)

    * Pelajari selengkapnya tentang [kueri output](query-azure-cli.md)

    * Pelajari selengkapnya tentang [otorisasi di Azure](authenticate-azure-cli.md)


    ### <a name="other-useful-documentation"></a>Dokumentasi bermanfaat lainnya


    Anda mungkin ingin meluangkan waktu untuk menjelajahi lebih banyak fitur lanjutan dari CLI, seperti [mengonfigurasi default](azure-cli-configuration.md) atau [ekstensi](azure-cli-extensions-overview.md).


    ### <a name="feedback"></a>Saran dan Komentar


    Jika Anda ingin memberikan umpan balik, saran, atau mengajukan pertanyaan tentang CLI, ada beberapa cara untuk dapat terhubung.


    * `az feedback` adalah perintah bawaan untuk CLI yang memungkinkan Anda memberikan umpan balik bentuk bebas kepada tim.

    * Ajukan permintaan fitur atau laporan bug dengan CLI di [repositori Azure CLI](https://github.com/Azure/azure-cli).

    * Ajukan pertanyaan atau dapatkan klarifikasi dengan mengajukan masalah di [repositori dokumentasi Azure CLI](https://github.com/MicrosoftDocs/azure-docs-cli/issues).


    Kami harap Anda menikmati penggunaan Azure CLI!
